<html>
<head>
	<script type="text/javascript">
		var hasAlias;
		var _dojoConfig= {
			baseUrl:"../../../../dojo",
			waitSeconds:5,
			cacheBust:"123",
			locale:"us-en1",
			has:{
				configTestHas1:1
			}
		};
		function expectDojoConfig(t) {
			t.is(require.rawConfig.baseUrl, "../../../../dojo");
			t.is(require.rawConfig.waitSeconds, 5);
			t.is(require.rawConfig.cacheBust, "123");
			t.is(require.rawConfig.locale,"us-en1");
			t.is(require.rawConfig.has, _dojoConfig.has);

			t.is(require.baseUrl, "../../../../dojo/");
			t.is(require.waitSeconds, 5);
			t.is(require.cacheBust, "123");
			t.is(require.locale,"us-en1");
			t.t(hasAlias("configTestHas1"));
		}

		var _djConfig= {
			baseUrl:"../../../../dojo",
			waitSeconds:6,
			cacheBust:"456",
			locale:"us-en2",
			has:{
				configTestHas2:1
			}
		};
		function expectDjConfig(t) {
			t.is(require.rawConfig.baseUrl, "../../../../dojo");
			t.is(require.rawConfig.waitSeconds, 6);
			t.is(require.rawConfig.cacheBust, "456");
			t.is(require.rawConfig.locale,"us-en2");
			t.is(require.rawConfig.has, _djConfig.has);

			t.is(require.baseUrl, "../../../../dojo/");
			t.is(require.waitSeconds, 6);
			t.is(require.cacheBust, "456");
			t.is(require.locale,"us-en2");
			t.t(hasAlias("configTestHas2"));
		}

		var _require= {
			baseUrl:"../../../../dojo",
			waitSeconds:7,
			cacheBust:"789",
			locale:"us-en3",
			has:{
				configTestHas3:1
			}
		};
		function expectRequireConfig(t) {
			t.is(require.rawConfig.baseUrl, "../../../../dojo");
			t.is(require.rawConfig.waitSeconds, 7);
			t.is(require.rawConfig.cacheBust, "789");
			t.is(require.rawConfig.locale,"us-en3");
			t.is(require.rawConfig.has, _require.has);

			t.is(require.baseUrl, "../../../../dojo/");
			t.is(require.waitSeconds, 7);
			t.is(require.cacheBust, "789");
			t.is(require.locale,"us-en3");
			t.t(hasAlias("configTestHas3"));
		}

		switch(location.search){
			case "?dojoConfig-djConfig-require":
				dojoConfig= _dojoConfig;
				djConfig= _djConfig;
				require= _require;
				expect= expectDojoConfig;
				break;
			case "?dojoConfig-djConfig":
				dojoConfig= _dojoConfig;
				djConfig= _djConfig;
				expect= expectDojoConfig;
				break;
			case "?dojoConfig-require":
				dojoConfig= _dojoConfig;
				require= _require;
				expect= expectDojoConfig;
				break;
			case "?djConfig-require":
				djConfig= _djConfig;
				require= _require;
				expect= expectDjConfig;
				break;
			case "?djConfig":
				djConfig= _djConfig;
				expect= expectDjConfig;
				break;
			case "?require":
				require= _require;
				expect= expectRequireConfig;
				break;
			case "?dojoConfig":
				dojoConfig= _dojoConfig;
				expect= expectDojoConfig;
				break;
		}
	</script>
	<script type="text/javascript" src="../../../dojo.js" data-dojo-config="isDebug:1, async:1"></script>
	<script type="text/javascript">
		require(["dojo", "doh", "dojo/has"], function(dojo, doh, has) {
			dojo.ready(function() {
				hasAlias= has;
				doh.register("dojoConfig-test", [expect]);
				doh.runOnLoad();
			});
		});
	</script>
</head>
<body>
</body>
</html>
