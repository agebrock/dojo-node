<html>
<head profile="http://www.w3.org/2002/12/namespace">

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="GENERATOR" content="Rational Application Developer Standard Edition for WebSphere Software">
<meta name="viewport" content="user-scalable=no, width=device-width" />

<link rel="stylesheet" type="text/css" href="../../../../../dijit/themes/dijit.css">
<link rel="stylesheet" type="text/css" href="../../../../../dijit/themes/tundra/tundra.css">

<title>JSON Import</title>

<!-- hosted version --> 
<script type="text/javascript" src="http://openlayers.org/api/OpenLayers.js"></script>

<script type="text/javascript">
	var djConfig = {
		debugAtAllCosts : true,
		isDebug : true,
		locale : 'en',
		parseOnLoad : true
	};
</script>

<script type="text/javascript" src="../../../../../dojo/dojo.js"></script>

<script type="text/javascript">
	dojo.require("dojox.geo.openlayers.widget.Map");
	dojo.require("dojox.geo.openlayers.Layer");
	dojo.require("dojox.geo.openlayers.GfxLayer");
	dojo.require("dojox.geo.openlayers.JsonImport");

	var map;

	dojo.addOnLoad(function(){
		var options = {
			baseLayerName : "TheMap"
		};

		map = new dojox.geo.openlayers.widget.Map(options);
		dojo.place(map.domNode, "map");
		map.startup();

		loadJsonMap();

		map.map.fitTo([ -160, 70, 160, -70 ]);

	});

	function loadJsonMap(){

		layer = new dojox.geo.openlayers.GfxLayer("GfxLayer");

		var cmc = new dojox.geo.openlayers.JsonImport({
			url : 'ContinentalEurope.json',
			nextFeature : dojo.hitch(this, function(f){
				f.setStroke([ Math.floor(Math.random() * 255), Math.floor(Math.random() * 255), Math.floor(Math.random() * 255) ]);
				var c = [ Math.floor(Math.random() * 255), Math.floor(Math.random() * 255), Math.floor(Math.random() * 255), 0.5 ];
				f.setFill(c);
				layer.addFeature(f);
			}),
			complete : dojo.hitch(this, function(){
				this.map.map.addLayer(layer);
			})
		});
		cmc.loadData();
	};
</script>

</head>
<body class="tundra">
</head>

<div id="map" style="background-color: #b5d0d0; width: 100%; height: 100%;"></div>

</body>
</html>
